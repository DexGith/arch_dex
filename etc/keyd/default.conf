# /etc/keyd/default.conf

[ids]
# Your hardware IDs
248a:00da
0001:0001

[main]
# FOUNDATION: Kept your excellent overload.
# Hold CapsLock -> activate the [extend] layer (I've renamed [nav] to [extend])
# Tap CapsLock  -> send Escape
capslock = overload(extend, escape)

# homepage = overload(extend_homepage, escape)
# calc = overload(extend_calc, escape)

 mail = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex alacritty)
 documents = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex alacritty)
# media = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex alacritty)
#rightshift = left
escape = overload(hyper, escape)
# This is your new, super-powered "Extend" layer.
# It combines your Vim navigation with the powerful features of the Extend layer.
[extend]

# --- THE BEST OF EXTEND: HOME ROW MODIFIERS ---
# This is the most powerful feature. Your left hand home row now acts
# as modifier keys, so you never have to move your hands.

rightshift = left
i = overload(control,escape)    # is no longer alt. it's just f 
# f = leftshift
q = leftshift
# s = overload(meta,escape)    # is no longer alt. it's just f 

# --- NEW POWER-KEY 'Q' ---
# This is a huge upgrade.
# Hold capslock + HOLD 'q' -> acts as Alt key.
# Hold capslock + TAP 'q' -> sends Escape.
# d = overload(alt, escape)

1 = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex /home/dex/scripts/ddesk/nothing/rofi_smart_window_switcher_works_with_Mod4_grave.sh)

2 = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex /home/dex/scripts/ddesk/nothing/rofi_win_w_current_desktop_windows.sh)

3 = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex dolphin)

4 = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex zsh -i -c 'rofi -show run')

6 = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex /home/dex/scripts/ddesk/nothing/rofi_alt_per_tab_scuffed.bak)

# make window always on top, using the window manager
f1 = M-f

f2 = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex /home/dex/scripts/ddesk/nothing/sticky_window_toggle)

f3 = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex xdotool mousemove 900 600)

f4 = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex xdotool mousemove 2600 400)

# --- YOUR NAVIGATION (PRESERVED & ENHANCED) ---
# Your core vim-style arrow keys are preserved.
h = left
j = down
k = up
l = right

# I've adopted the more standard 'u' and 'o' for line navigation from the Extend example.
# This frees up your number keys.
u = C-z
g = pageup
r = C-y
c = M-c
5 = A-f2
y = C-c
p = C-v
0 = home
e = end
a = home
pagedown = pagedown # d is now meta, so we use the actual pagedown key for this

# --- YOUR WORD-WISE NAVIGATION (PRESERVED) ---
# These are great, and they don't conflict. They now work with the new home row mods!
# e.g., hold capslock+s+b to do Shift+Ctrl+Left (select word).
f = C-right
b = C-left

# --- YOUR MACRO (MOVED & IMPROVED) ---
# Since 'd' is now the Meta key, I've moved your "select and delete" macro to 'g'.
# It's right next to your home row and easy to press.
# d = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex /home/dex/scripts/ddesk/keyd/keyd_select_line_delete_end_of_line.sh)

o = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex /home/dex/scripts/ddesk/keyd/keyd_next_line.sh)

tab = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex alacritty)

t = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex alacritty)
# --- POWERFUL NEW KEYS FROM THE EXTEND LAYER ---
# These are huge quality-of-life improvements.
slash = backspace
semicolon = delete
comma = escape
x = delete
d = delete
m = enter
dot = tab
n = space
# grave = capslock # wow grave works

# To let you toggle the *real* Caps Lock function, we'll map it to 'c'.
# Hold capslock and tap 'c' to turn on actual CAPS LOCK.
rightbrace = capslock

# this is for sxhkd, to reload it do pkill -USR1 -x sxhkd and run it again I think. 
# you can find the config in # ~/.config/sxhkd/sxhkdrc
# this sxhkd is like you know c+x c+f you know it's a like you hit
# and it waits and listens for the next key then depending on the
# next key it will do something. I wonder if I can trigger it with
# other tools that are not keyd like xbindkeys... probably.
# t = M-A-S-c 

w = M-A-S-c 

space = swap(vim_mode)


# !!!!!!!!! I HAVE space = swap(vim_mode) BUT WHATA ABOUT layer(hypr) we can test like t = layer(hypr) !!!!!!!!
# --- SPECIAL LAYER KEY ---
# This is the new way to access your "hyper" shortcuts.
# Hold CapsLock and press 'e' to temporarily switch to the [hyper] layer.
# t = layer(hyper)

# !!!!!!!!! I HAVE space = swap(vim_mode) BUT WHATA ABOUT layer(hypr) we can test like t = layer(hypr) !!!!!!!!

# --- OTHER BINDINGS PRESERVED ---
# z = C-z
# x = delete      # This is fine, but redundant since ';' is now also delete. Your choice.
# v = C-v
# y = C-c       

[extend+control]

h = backspace
w = C-backspace
r = C-y

k = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex /home/dex/scripts/ddesk/keyd/keyd_select_line_delete_end_of_line.sh)

u = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex /home/dex/scripts/ddesk/keyd/keyd_select_line_delete_home_of_line.sh)

[extend+shift]
o = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex /home/dex/scripts/ddesk/keyd/keyd_next_line_up.sh)


4 = end
e = end
g = pagedown
x = backspace
d = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex /home/dex/scripts/ddesk/keyd/keyd_select_line_delete.sh)

[vim_mode]

0 = S-home
4 = S-end
g = S-pagedown

n = swap(extend)

[vim_mode+shift]


4 = end
0 = home


# if you make it [vim_mode:C] it's kinda wanky with scripts but [vim_mod:C] probably has other advantages ? i'm not sure... maybe the ability to repeat keys or whatever
# o = command(env DISPLAY=:0 XAUTHORITY=/home/dex/.Xauthority sudo -u dex xdotool key Home)
# I still don't know what to put here for this 3rd layer
# idk aobut this one




# ------------------------------ ESCAPE-----------------
#



# ===================================================================
# Define the 'hyper' layer.
# These bindings are ONLY active while the Escape key is HELD down.
# ===================================================================
[hyper]

# Let's add your 'esc + h' idea.
# This will send the 'left' arrow key. Great for navigation.
h = left
j = down
k = up
l = right

# Example: Close the current window (sends Alt+F4)
q = M-A-S-c 

# Example: Launch a terminal (sends Ctrl+Alt+T, a common shortcut)
# t = C-A-grave
t = C-A-F1
f = C-A-F1


